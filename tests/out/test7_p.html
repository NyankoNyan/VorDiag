<!DOCTYPE html>
<html>
 <head>
  <title>canvas</title>
  <meta charset="utf-8">
  <script> 
var outputRepr = {"size":{"x":700,"y":700},"camera":[[0.5833333,0,0],[0,-0.5833333,0],[58.333332,641.6666,1]],"edges":[],"rays":[],"dots":[{"x":191.35062,"y":224.75706},{"x":440.4566,"y":447.602},{"x":496.72534,"y":839.20984},{"x":875.8245,"y":592.5352},{"x":871.8177,"y":558.54846},{"x":840.02386,"y":612.2802},{"x":271.5329,"y":444.7607},{"x":864.106,"y":754.2515},{"x":761.5917,"y":731.63367},{"x":323.6294,"y":589.87354},{"x":475.32233,"y":379.66226},{"x":839.18414,"y":617.0649},{"x":835.8855,"y":414.37112},{"x":812.46234,"y":254.78683},{"x":898.29285,"y":164.32364},{"x":739.3935,"y":465.00488},{"x":406.00494,"y":886.24445},{"x":831.2152,"y":290.05005},{"x":446.8862,"y":306.91983},{"x":129.30681,"y":258.20862},{"x":305.76703,"y":643.9841},{"x":680.1931,"y":599.5465},{"x":513.42163,"y":831.45},{"x":232.29073,"y":553.3635},{"x":767.8508,"y":864.90814},{"x":579.4887,"y":606.4752},{"x":619.5243,"y":200.54324},{"x":307.597,"y":711.68835},{"x":285.57294,"y":723.39166},{"x":511.71652,"y":182.35422},{"x":126.74751,"y":721.0376},{"x":594.2424,"y":807.494},{"x":719.1549,"y":475.019},{"x":306.27527,"y":285.28848},{"x":513.54553,"y":674.056},{"x":407.36536,"y":554.6719},{"x":702.32684,"y":165.42076},{"x":384.10654,"y":731.3382},{"x":599.4692,"y":339.63763},{"x":203.6433,"y":104.43547},{"x":282.08038,"y":359.09882},{"x":386.93604,"y":133.38469},{"x":484.8349,"y":232.9183},{"x":745.4806,"y":305.4617},{"x":678.64746,"y":219.52684},{"x":104.477104,"y":623.4945},{"x":695.2033,"y":846.9526},{"x":231.46112,"y":484.72937},{"x":149.74173,"y":772.69904},{"x":780.3916,"y":138.40262},{"x":625.17474,"y":847.00226},{"x":139.818,"y":193.7948},{"x":557.5428,"y":124.81687},{"x":804.1484,"y":554.1035},{"x":716.4367,"y":476.25873},{"x":212.21918,"y":845.9353},{"x":619.7484,"y":507.28107},{"x":800.2738,"y":667.6487},{"x":434.10162,"y":560.85767},{"x":422.65912,"y":586.2366},{"x":629.5384,"y":100.813576},{"x":506.641,"y":394.01868},{"x":669.5789,"y":683.87085},{"x":759.4685,"y":755.37427},{"x":833.95966,"y":799.37714},{"x":681.5965,"y":726.77014},{"x":459.246,"y":165.24066},{"x":379.26074,"y":335.07812},{"x":319.28082,"y":293.1412},{"x":475.84192,"y":460.01804},{"x":328.76996,"y":291.37708},{"x":489.02496,"y":302.38873},{"x":107.30768,"y":158.5418},{"x":103.74611,"y":287.92227},{"x":146.67879,"y":463.8124},{"x":150.62775,"y":488.88406},{"x":450.03992,"y":294.15503},{"x":408.8642,"y":624.3612},{"x":440.36124,"y":645.7993},{"x":424.21588,"y":773.67194},{"x":265.34833,"y":148.77412},{"x":620.1439,"y":817.0596}],"polygons":[{"dots":[{"x":555.92804,"y":0},{"x":605.528,"y":148.77037},{"x":648.2328,"y":153.05832},{"x":715.51917,"y":77.251434},{"x":734.7686,"y":0}]},{"dots":[{"x":605.528,"y":148.77037},{"x":555.92804,"y":0},{"x":465.75604,"y":0},{"x":468.12128,"y":47.098335},{"x":500.84872,"y":126.680244},{"x":567.5807,"y":179.82977}]},{"dots":[{"x":310.8591,"y":20.331863},{"x":314.07028,"y":0},{"x":81.62568,"y":0},{"x":161.11797,"y":141.53497},{"x":192.72221,"y":164.10846},{"x":206.53337,"y":165.51947}]},{"dots":[{"x":314.07028,"y":0},{"x":310.8591,"y":20.331863},{"x":333.9296,"y":202.60562},{"x":339.87213,"y":205.76106},{"x":390.0796,"y":224.24535},{"x":468.12128,"y":47.098335},{"x":465.75604,"y":0}]},{"dots":[{"x":734.7686,"y":0},{"x":715.51917,"y":77.251434},{"x":760.2721,"y":206.55742},{"x":831.5242,"y":186.92339},{"x":872.62,"y":0}]},{"dots":[{"x":310.8591,"y":20.331863},{"x":206.53337,"y":165.51947},{"x":265.63763,"y":223.07951},{"x":333.9296,"y":202.60562}]},{"dots":[{"x":161.11797,"y":141.53497},{"x":81.62568,"y":0},{"x":0,"y":0},{"x":0,"y":220.32712},{"x":57.04496,"y":221.89743},{"x":79.30332,"y":216.98442}]},{"dots":[{"x":872.62,"y":0},{"x":831.5242,"y":186.92339},{"x":885.7894,"y":238.40968},{"x":1000,"y":299.34344},{"x":999.9999,"y":0}]},{"dots":[{"x":468.12128,"y":47.098335},{"x":390.0796,"y":224.24535},{"x":390.95383,"y":225.14963},{"x":401.16193,"y":225.87863},{"x":477.96616,"y":196.83891},{"x":500.84872,"y":126.680244}]},{"dots":[{"x":715.51917,"y":77.251434},{"x":648.2328,"y":153.05832},{"x":659.13074,"y":178.75069},{"x":750.4177,"y":218.70224},{"x":760.2721,"y":206.55742}]},{"dots":[{"x":567.5807,"y":179.82977},{"x":500.84872,"y":126.680244},{"x":477.96616,"y":196.83891},{"x":557.5708,"y":239.15959}]},{"dots":[{"x":161.11797,"y":141.53497},{"x":79.30332,"y":216.98442},{"x":153.66235,"y":229.11848},{"x":192.72221,"y":164.10846}]},{"dots":[{"x":648.2328,"y":153.05832},{"x":605.528,"y":148.77037},{"x":567.5807,"y":179.82977},{"x":557.5708,"y":239.15959},{"x":563.3124,"y":263.04654},{"x":563.651,"y":263.48032},{"x":628.90454,"y":272.88873},{"x":659.13074,"y":178.75069}]},{"dots":[{"x":750.4177,"y":218.70224},{"x":659.13074,"y":178.75069},{"x":628.90454,"y":272.88873},{"x":666.6796,"y":297.79047},{"x":745.7899,"y":236.26501}]},{"dots":[{"x":192.72221,"y":164.10846},{"x":153.66235,"y":229.11848},{"x":200.65677,"y":316.28076},{"x":225.32187,"y":299.6228},{"x":265.63763,"y":223.07951},{"x":206.53337,"y":165.51947}]},{"dots":[{"x":557.5708,"y":239.15959},{"x":477.96616,"y":196.83891},{"x":401.16193,"y":225.87863},{"x":475.8581,"y":268.32135},{"x":563.3124,"y":263.04654}]},{"dots":[{"x":831.5242,"y":186.92339},{"x":760.2721,"y":206.55742},{"x":750.4177,"y":218.70224},{"x":745.7899,"y":236.26501},{"x":787.1129,"y":290.88562},{"x":885.7894,"y":238.40968}]},{"dots":[{"x":153.66235,"y":229.11848},{"x":79.30332,"y":216.98442},{"x":57.04496,"y":221.89743},{"x":188.37773,"y":334.87436},{"x":200.65677,"y":316.28076}]},{"dots":[{"x":333.9296,"y":202.60562},{"x":265.63763,"y":223.07951},{"x":225.32187,"y":299.6228},{"x":293.08234,"y":321.83456},{"x":320.94482,"y":275.68915},{"x":339.87213,"y":205.76106}]},{"dots":[{"x":188.37773,"y":334.87436},{"x":57.04496,"y":221.89743},{"x":0,"y":220.32712},{"x":0,"y":406.43024},{"x":177.06848,"y":363.2099}]},{"dots":[{"x":885.7894,"y":238.40968},{"x":787.1129,"y":290.88562},{"x":798.3742,"y":353.53195},{"x":1000,"y":345.95758},{"x":1000,"y":299.34344}]},{"dots":[{"x":339.87213,"y":205.76106},{"x":320.94482,"y":275.68915},{"x":332.5371,"y":338.04312},{"x":389.88556,"y":271.7843},{"x":390.95383,"y":225.14963},{"x":390.0796,"y":224.24535}]},{"dots":[{"x":320.94482,"y":275.68915},{"x":293.08234,"y":321.83456},{"x":329.50616,"y":342.37778},{"x":332.5371,"y":338.04312}]},{"dots":[{"x":475.8581,"y":268.32135},{"x":401.16193,"y":225.87863},{"x":390.95383,"y":225.14963},{"x":389.88556,"y":271.7843},{"x":399.51843,"y":288.44498},{"x":468.0328,"y":305.37238}]},{"dots":[{"x":563.3124,"y":263.04654},{"x":475.8581,"y":268.32135},{"x":468.0328,"y":305.37238},{"x":471.66614,"y":339.16223},{"x":509.74222,"y":345.9141},{"x":537.659,"y":340.5471},{"x":563.651,"y":263.48032}]},{"dots":[{"x":745.7899,"y":236.26501},{"x":666.6796,"y":297.79047},{"x":686.64856,"y":383.10464},{"x":759.4043,"y":385.88065},{"x":798.3742,"y":353.53195},{"x":787.1129,"y":290.88562}]},{"dots":[{"x":468.0328,"y":305.37238},{"x":399.51843,"y":288.44498},{"x":427.77982,"y":356.31793},{"x":471.66614,"y":339.16223}]},{"dots":[{"x":389.88556,"y":271.7843},{"x":332.5371,"y":338.04312},{"x":329.50616,"y":342.37778},{"x":346.34232,"y":410.49164},{"x":356.42844,"y":420.398},{"x":412.08817,"y":390.12756},{"x":427.77982,"y":356.31793},{"x":399.51843,"y":288.44498}]},{"dots":[{"x":628.90454,"y":272.88873},{"x":563.651,"y":263.48032},{"x":537.659,"y":340.5471},{"x":587.778,"y":426.1001},{"x":644.809,"y":419.2013},{"x":678.7879,"y":390.11038},{"x":686.40607,"y":383.3755},{"x":686.64856,"y":383.10464},{"x":666.6796,"y":297.79047}]},{"dots":[{"x":293.08234,"y":321.83456},{"x":225.32187,"y":299.6228},{"x":200.65677,"y":316.28076},{"x":188.37773,"y":334.87436},{"x":177.06848,"y":363.2099},{"x":199.6673,"y":392.43167},{"x":346.34232,"y":410.49164},{"x":329.50616,"y":342.37778}]},{"dots":[{"x":509.74222,"y":345.9141},{"x":471.66614,"y":339.16223},{"x":427.77982,"y":356.31793},{"x":412.08817,"y":390.12756},{"x":470.05612,"y":419.8759},{"x":475.85547,"y":419.83838}]},{"dots":[{"x":509.74222,"y":345.9141},{"x":475.85547,"y":419.83838},{"x":556.40704,"y":457.42834},{"x":587.778,"y":426.1001},{"x":537.659,"y":340.5471}]},{"dots":[{"x":1000,"y":345.95758},{"x":798.3742,"y":353.53195},{"x":759.4043,"y":385.88065},{"x":809.79877,"y":481.9164},{"x":842.3845,"y":489.3176},{"x":1000,"y":450.0365}]},{"dots":[{"x":346.34232,"y":410.49164},{"x":199.6673,"y":392.43167},{"x":203.33339,"y":416.45718},{"x":302.2588,"y":515.6378},{"x":336.5182,"y":503.33847},{"x":355.42636,"y":479.97406},{"x":356.42844,"y":420.398}]},{"dots":[{"x":470.05612,"y":419.8759},{"x":412.08817,"y":390.12756},{"x":356.42844,"y":420.398},{"x":355.42636,"y":479.97406},{"x":433.17282,"y":503.99942},{"x":440.3965,"y":504.40475}]},{"dots":[{"x":475.85547,"y":419.83838},{"x":470.05612,"y":419.8759},{"x":440.3965,"y":504.40475},{"x":521.1737,"y":537.84064},{"x":532.66907,"y":529.7055},{"x":556.40704,"y":457.42834}]},{"dots":[{"x":177.06848,"y":363.2099},{"x":0,"y":406.43024},{"x":0,"y":499.76196},{"x":190.17076,"y":469.80893},{"x":203.33339,"y":416.45718},{"x":199.6673,"y":392.43167}]},{"dots":[{"x":759.4043,"y":385.88065},{"x":686.64856,"y":383.10464},{"x":686.40607,"y":383.3755},{"x":754.905,"y":521.812},{"x":809.79877,"y":481.9164}]},{"dots":[{"x":754.905,"y":521.812},{"x":686.40607,"y":383.3755},{"x":678.7879,"y":390.11038},{"x":744.134,"y":533.388}]},{"dots":[{"x":744.134,"y":533.388},{"x":678.7879,"y":390.11038},{"x":644.809,"y":419.2013},{"x":681.2882,"y":532.8972},{"x":731.47534,"y":547.65094}]},{"dots":[{"x":302.2588,"y":515.6378},{"x":203.33339,"y":416.45718},{"x":190.17076,"y":469.80893},{"x":192.72581,"y":519.51953},{"x":299.3,"y":518.23145}]},{"dots":[{"x":190.17076,"y":469.80893},{"x":0,"y":499.76196},{"x":0,"y":512.4585},{"x":156.05614,"y":565.9617},{"x":192.72581,"y":519.51953}]},{"dots":[{"x":644.809,"y":419.2013},{"x":587.778,"y":426.1001},{"x":556.40704,"y":457.42834},{"x":532.66907,"y":529.7055},{"x":627.44385,"y":568.1716},{"x":681.2882,"y":532.8972}]},{"dots":[{"x":299.3,"y":518.23145},{"x":192.72581,"y":519.51953},{"x":156.05614,"y":565.9617},{"x":203.26357,"y":651.99713},{"x":266.24237,"y":600.93317}]},{"dots":[{"x":809.79877,"y":481.9164},{"x":754.905,"y":521.812},{"x":744.134,"y":533.388},{"x":731.47534,"y":547.65094},{"x":754.05164,"y":609.23254},{"x":777.7173,"y":610.0403},{"x":786.22723,"y":605.3048},{"x":836.81494,"y":574.1089},{"x":842.3845,"y":489.3176}]},{"dots":[{"x":433.17282,"y":503.99942},{"x":355.42636,"y":479.97406},{"x":336.5182,"y":503.33847},{"x":373.0634,"y":590.2703},{"x":374.1625,"y":590.24677},{"x":418.14926,"y":568.9343}]},{"dots":[{"x":1000,"y":450.0365},{"x":842.3845,"y":489.3176},{"x":836.81494,"y":574.1089},{"x":844.9821,"y":578.9418},{"x":1000,"y":560.6672}]},{"dots":[{"x":440.3965,"y":504.40475},{"x":433.17282,"y":503.99942},{"x":418.14926,"y":568.9343},{"x":486.3979,"y":599.70526},{"x":500.60983,"y":598.65796},{"x":502.50964,"y":597.32477},{"x":521.1737,"y":537.84064}]},{"dots":[{"x":486.3979,"y":599.70526},{"x":418.14926,"y":568.9343},{"x":374.1625,"y":590.24677},{"x":439.12833,"y":613.75385}]},{"dots":[{"x":336.5182,"y":503.33847},{"x":302.2588,"y":515.6378},{"x":299.3,"y":518.23145},{"x":266.24237,"y":600.93317},{"x":356.6707,"y":630.7843},{"x":373.0634,"y":590.2703}]},{"dots":[{"x":1000,"y":560.6672},{"x":844.9821,"y":578.9418},{"x":867.3768,"y":619.54675},{"x":905.1315,"y":675.94165},{"x":1000,"y":682.816}]},{"dots":[{"x":681.2882,"y":532.8972},{"x":627.44385,"y":568.1716},{"x":632.13324,"y":636.32794},{"x":731.58563,"y":648.84564},{"x":754.05164,"y":609.23254},{"x":731.47534,"y":547.65094}]},{"dots":[{"x":627.44385,"y":568.1716},{"x":532.66907,"y":529.7055},{"x":521.1737,"y":537.84064},{"x":502.50964,"y":597.32477},{"x":591.25073,"y":683.9153},{"x":632.13324,"y":636.32794}]},{"dots":[{"x":844.9821,"y":578.9418},{"x":836.81494,"y":574.1089},{"x":786.22723,"y":605.3048},{"x":867.3768,"y":619.54675}]},{"dots":[{"x":867.3768,"y":619.54675},{"x":786.22723,"y":605.3048},{"x":777.7173,"y":610.0403},{"x":871.3643,"y":682.07587},{"x":905.1315,"y":675.94165}]},{"dots":[{"x":156.05614,"y":565.9617},{"x":0,"y":512.4585},{"x":0,"y":698.66187},{"x":203.23682,"y":652.2602},{"x":203.26357,"y":651.99713}]},{"dots":[{"x":439.12833,"y":613.75385},{"x":374.1625,"y":590.24677},{"x":373.0634,"y":590.2703},{"x":356.6707,"y":630.7843},{"x":364.20703,"y":670.37964},{"x":395.63596,"y":677.65314}]},{"dots":[{"x":356.6707,"y":630.7843},{"x":266.24237,"y":600.93317},{"x":203.26357,"y":651.99713},{"x":203.23682,"y":652.2602},{"x":207.06522,"y":661.15485},{"x":275.92856,"y":678.6674},{"x":357.42148,"y":676.4648},{"x":364.20703,"y":670.37964}]},{"dots":[{"x":486.3979,"y":599.70526},{"x":439.12833,"y":613.75385},{"x":395.63596,"y":677.65314},{"x":447.30182,"y":711.6312},{"x":456.5401,"y":712.7976},{"x":500.60983,"y":598.65796}]},{"dots":[{"x":871.3643,"y":682.07587},{"x":777.7173,"y":610.0403},{"x":754.05164,"y":609.23254},{"x":731.58563,"y":648.84564},{"x":734.39874,"y":671.5087},{"x":817.5221,"y":721.7613}]},{"dots":[{"x":591.25073,"y":683.9153},{"x":502.50964,"y":597.32477},{"x":500.60983,"y":598.65796},{"x":456.5401,"y":712.7976},{"x":501.08536,"y":752.7432},{"x":534.06067,"y":752.7692},{"x":589.00995,"y":719.5393}]},{"dots":[{"x":731.58563,"y":648.84564},{"x":632.13324,"y":636.32794},{"x":591.25073,"y":683.9153},{"x":589.00995,"y":719.5393},{"x":600.2915,"y":726.4136},{"x":723.8684,"y":691.7954},{"x":734.39874,"y":671.5087}]},{"dots":[{"x":357.42148,"y":676.4648},{"x":275.92856,"y":678.6674},{"x":330.48685,"y":781.3388}]},{"dots":[{"x":203.23682,"y":652.2602},{"x":0,"y":698.66187},{"x":0,"y":808.4001},{"x":206.2434,"y":716.6024},{"x":207.06522,"y":661.15485}]},{"dots":[{"x":330.48685,"y":781.3388},{"x":275.92856,"y":678.6674},{"x":207.06522,"y":661.15485},{"x":206.2434,"y":716.6024},{"x":225.96776,"y":770.9387},{"x":317.50656,"y":825.7332},{"x":327.50272,"y":818.34064}]},{"dots":[{"x":723.8684,"y":691.7954},{"x":600.2915,"y":726.4136},{"x":627.8782,"y":756.26587},{"x":675.051,"y":788.37274},{"x":704.37756,"y":785.05237},{"x":720.9398,"y":739.96375}]},{"dots":[{"x":395.63596,"y":677.65314},{"x":364.20703,"y":670.37964},{"x":357.42148,"y":676.4648},{"x":330.48685,"y":781.3388},{"x":327.50272,"y":818.34064},{"x":335.93176,"y":817.1494},{"x":447.30182,"y":711.6312}]},{"dots":[{"x":817.5221,"y":721.7613},{"x":734.39874,"y":671.5087},{"x":723.8684,"y":691.7954},{"x":720.9398,"y":739.96375},{"x":811.7151,"y":748.08154}]},{"dots":[{"x":871.3643,"y":682.07587},{"x":817.5221,"y":721.7613},{"x":811.7151,"y":748.08154},{"x":811.75604,"y":751.9061},{"x":1000,"y":877.66864},{"x":1000,"y":682.816},{"x":905.1315,"y":675.94165}]},{"dots":[{"x":811.7151,"y":748.08154},{"x":720.9398,"y":739.96375},{"x":704.37756,"y":785.05237},{"x":742.44305,"y":811.7649},{"x":778.00775,"y":809.0432},{"x":811.75604,"y":751.9061}]},{"dots":[{"x":206.2434,"y":716.6024},{"x":0,"y":808.4001},{"x":0,"y":963.71094},{"x":225.96776,"y":770.9387}]},{"dots":[{"x":447.30182,"y":711.6312},{"x":335.93176,"y":817.1494},{"x":436.1396,"y":833.3601},{"x":481.05984,"y":783.6615},{"x":501.08536,"y":752.7432},{"x":456.5401,"y":712.7976}]},{"dots":[{"x":1000,"y":877.66864},{"x":811.75604,"y":751.9061},{"x":778.00775,"y":809.0432},{"x":967.29535,"y":1000},{"x":1000.00006,"y":1000}]},{"dots":[{"x":600.2915,"y":726.4136},{"x":589.00995,"y":719.5393},{"x":534.06067,"y":752.7692},{"x":566.22754,"y":861.29095},{"x":598.3921,"y":836.10815},{"x":627.8782,"y":756.26587}]},{"dots":[{"x":627.8782,"y":756.26587},{"x":598.3921,"y":836.10815},{"x":660.1739,"y":825.72784},{"x":675.051,"y":788.37274}]},{"dots":[{"x":534.06067,"y":752.7692},{"x":501.08536,"y":752.7432},{"x":481.05984,"y":783.6615},{"x":554.91595,"y":942.5726},{"x":566.22754,"y":861.29095}]},{"dots":[{"x":554.91595,"y":942.5726},{"x":481.05984,"y":783.6615},{"x":436.1396,"y":833.3601},{"x":522.5352,"y":1000},{"x":551.432,"y":1000}]},{"dots":[{"x":225.96776,"y":770.9387},{"x":0,"y":963.71094},{"x":0,"y":1000},{"x":281.25732,"y":1000},{"x":317.50656,"y":825.7332}]},{"dots":[{"x":704.37756,"y":785.05237},{"x":675.051,"y":788.37274},{"x":660.1739,"y":825.72784},{"x":660.297,"y":1000},{"x":695.9188,"y":1000},{"x":742.44305,"y":811.7649}]},{"dots":[{"x":660.1739,"y":825.72784},{"x":598.3921,"y":836.10815},{"x":566.22754,"y":861.29095},{"x":554.91595,"y":942.5726},{"x":551.432,"y":1000},{"x":660.297,"y":1000}]},{"dots":[{"x":778.00775,"y":809.0432},{"x":742.44305,"y":811.7649},{"x":695.9188,"y":1000},{"x":967.29535,"y":1000}]},{"dots":[{"x":436.1396,"y":833.3601},{"x":335.93176,"y":817.1494},{"x":327.50272,"y":818.34064},{"x":317.50656,"y":825.7332},{"x":281.25732,"y":1000},{"x":522.5352,"y":1000}]}],"arcs":[],"circles":[],"lines":[]};
var camera = [[1,0,0],[0,1,0],[0,0,1]];
var reverseCamera;

var matrixMult = function(x,y,m){
	return {
		"x":m[0][0]*x+m[1][0]*y+m[2][0],
		"y":m[0][1]*x+m[1][1]*y+m[2][1]
	};
};
var coordToCamera = function(x,y){
	return matrixMult(x,y,camera);
};
var scaleCoord = function(x,y){
	var c = camera;
	return {
		"x":c[0][0]*x+c[1][0]*y,
		"y":c[0][1]*x+c[1][1]*y
	};
}
var polygonColors = ["#CD5C5C", "#ADFF2F", "#7B68EE", "#FFA500",
"#F08080", "#00FF00", "#4682B4", "#A52A2A",
"#E9967A", "#32CD32", "#87CEFA", "#D2691E",
"#DC143C", "#00FA9A", "#4169E1",
"#B22222", "#9ACD32", "#FFD700",
"#FF69B4", "#808000", "#FFDAB9",
"#C71585", "#66CDAA", "#F0E68C",
"#DB7093", "#008B8B", "#9370DB"]; 
var getRayMult = function(){
	return 1000/(Math.abs(camera[0][0])+Math.abs(camera[0][1])+Math.abs(camera[1][0])+Math.abs(camera[1][1]));
};

var getMinor = function(m, x, y){
	var x1 = (x+1)%3;
	var x2 = (x+2)%3;
	var y1 = (y+1)%3;
	var y2 = (y+2)%3;
	return m[x1][y1]*m[x2][y2] - m[x1][y2]*m[x2][y1];
};
var getMinorMatrix = function(m){
	var result = [];
	for(var i = 0; i < 3; i++){
		result[i] = [];
		for(var j = 0; j < 3; j++){
			result[i][j] = getMinor(m, i, j);
		}
	}
	return result;
};
var backMatrix = function(m){	
	var mmin = getMinorMatrix(m);	
	var det = m[0][0] * mmin[0][0] - m[0][1] * mmin[0][1] + m[0][2] * mmin[0][2];	
	var result = [];
	for(var i = 0; i < 3; i++){
		result[i] = [];
		for(var j = 0; j < 3; j++){
			result[i][j] = mmin[j][i] / det * ((i+j)%2==0?1:-1);
		}
	}
	return result;		
};
window.onload = function() {
	var drawingCanvas = document.getElementById('smile');
	var coord;
	if(drawingCanvas && drawingCanvas.getContext) {
		var context = drawingCanvas.getContext('2d');
		if(outputRepr.camera!==undefined){
			for(var i = 0; i < 3; i++){
				for(var j = 0; j < 3; j++){
					if(outputRepr.camera[i][j] !== undefined){
						camera[i][j] = outputRepr.camera[i][j];
					}
				}
			}
		}
		reverseCamera = backMatrix(camera);
		if(outputRepr.size!==undefined){
			drawingCanvas.width = outputRepr.size.x;
			drawingCanvas.height = outputRepr.size.y;
		}
		var rayMult = getRayMult();		
		var minCorner = matrixMult(0, 0, reverseCamera);
		var maxCorner = matrixMult(drawingCanvas.width, drawingCanvas.height, reverseCamera);
		var xMin = Math.min(minCorner.x, maxCorner.x);
		var xMax = Math.max(minCorner.x, maxCorner.x);
		var xStep = (xMax - xMin) / drawingCanvas.width;
		var yMin = Math.min(minCorner.y, maxCorner.y);
		var yMax = Math.max(minCorner.y, maxCorner.y);
		
		context.shadowColor = "rgba(0,0,0,.5)";
		context.shadowBlur = 2;
		context.lineCap = 'round';
		context.lineJoin = 'round';
		context.lineWidth = 1;
		
		if(outputRepr.polygons!==undefined){
			for(var polyId = 0; polyId < outputRepr.polygons.length; polyId++){
				var poly = outputRepr.polygons[polyId];
				context.fillStyle = polygonColors[polyId % polygonColors.length];				
				
				context.beginPath();
				coord = coordToCamera(poly.dots[0].x, poly.dots[0].y);
				context.moveTo(coord.x, coord.y);
				for(var dotId = 1; dotId < poly.dots.length; dotId++){
					coord = coordToCamera(poly.dots[dotId].x, poly.dots[dotId].y);
					context.lineTo(coord.x, coord.y);
				}
				context.closePath();
				context.fill();
			}
		}
		if(outputRepr.edges!==undefined){
			context.strokeStyle = "#AA0";
			
			outputRepr.edges.forEach((elem)=>{				
				context.beginPath();
				coord = coordToCamera(elem.x1, elem.y1);
				context.moveTo(coord.x, coord.y);
				coord = coordToCamera(elem.x2, elem.y2);
				context.lineTo(coord.x, coord.y);				
				context.stroke();
			});
		}
		if(outputRepr.rays!==undefined){
			context.strokeStyle = "#0AA";
			
			outputRepr.rays.forEach((elem)=>{				
				context.beginPath();
				coord = coordToCamera(elem.x, elem.y);
				context.moveTo(coord.x, coord.y);
				var rayCoord = coordToCamera(elem.x+elem.dx*rayMult, elem.y+elem.dy*rayMult);
				context.lineTo(rayCoord.x, rayCoord.y);
				context.lineCap = 'round';
				context.stroke();
			});
		}	
		if(outputRepr.lines!==undefined){
			context.strokeStyle = "#AAA";
			
			outputRepr.lines.forEach((elem)=>{
				var x, y;
				var coord1, coord2;
				if(Math.abs(elem.dx) > Math.abs(elem.dy)){
					coord1 = coordToCamera((-elem.dy * yMin - elem.c) / elem.dx, yMin);
					coord2 = coordToCamera((-elem.dy * yMax - elem.c) / elem.dx, yMax);
				}else{
					coord1 = coordToCamera(xMin, (-elem.dx * xMin - elem.c) / elem.dy);
					coord2 = coordToCamera(xMax, (-elem.dx * xMax - elem.c) / elem.dy);
				}
				context.beginPath();
				context.moveTo(coord1.x, coord1.y);
				context.lineTo(coord2.x, coord2.y);
				context.stroke();
			});
		}
		if(outputRepr.circles!==undefined){
			context.setLineDash([5,5]);
			context.strokeStyle = "#A00";
			
			outputRepr.circles.forEach((elem)=>{
				var coord = coordToCamera(elem.x, elem.y);
				var size = scaleCoord(1, 1);
				context.beginPath();
				context.ellipse(coord.x, coord.y, elem.r*Math.abs(size.x), elem.r*Math.abs(size.y), 0, 0, Math.PI*2);
				context.stroke();
			});
			context.setLineDash([]);
		}
		if(outputRepr.arcs!==undefined){
			context.strokeStyle = "#00A";

			outputRepr.arcs.forEach((elem)=>{
				context.beginPath();
				drawMinX = Math.max(elem.minX, xMin);
				drawMaxX = Math.min(elem.maxX, xMax);
				var count = 0;
				for(var x = drawMinX; x < drawMaxX+xStep; x += xStep){
					var y = .5 * ((x - elem.fX) * (x - elem.fX) 
						+ elem.fY * elem.fY - elem.dirY * elem.dirY)
						/ (elem.fY - elem.dirY);
					var coord = coordToCamera(x,y);
					if(count==0){
						context.moveTo(coord.x, coord.y);
					}else{
						context.lineTo(coord.x, coord.y);
					}
					count++;
				}
				//context.closePath();
				context.stroke();
			});
		}
		if(outputRepr.dots!==undefined){
			context.fillStyle = "#FFF";
			context.strokeStyle = "#000";
			
			outputRepr.dots.forEach((elem)=>{				
				coord = coordToCamera(elem.x, elem.y);
				context.beginPath();
				context.arc(coord.x, coord.y, 3, 0, Math.PI*2);
				context.fill();
				context.stroke();				
			});
		}
	}
}
  </script>
 </head>
 <body>
  <canvas id="smile" width="200" height="200">
    <p>Ваш браузер не поддерживает рисование.</p>
  </canvas>
 </body>
</html>