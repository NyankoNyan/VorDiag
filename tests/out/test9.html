<!DOCTYPE html>
<html>
 <head>
  <title>canvas</title>
  <meta charset="utf-8">
  <script> 
var outputRepr = {"size":{"x":700,"y":700},"camera":[[0.5833333,0,0],[0,-0.5833333,0],[58.333332,641.6666,1]],"edges":[{"x1":681.54144,"y1":145.16376,"x2":476.8784,"y2":45.63256},{"x1":898.8673,"y1":-687.90466,"x2":681.54144,"y2":145.16376},{"x1":898.8673,"y1":-687.90466,"x2":792.39777,"y2":170.47476},{"x1":681.54144,"y1":145.16376,"x2":680.3138,"y2":176.2972},{"x1":476.8784,"y1":45.63256,"x2":475.32425,"y2":109.86869},{"x1":382.3374,"y1":179.3567,"x2":268.08563,"y2":168.2346},{"x1":268.08563,"y1":168.2346,"x2":21.45522,"y2":-66.92563},{"x1":792.39777,"y1":170.47476,"x2":746.24243,"y2":192.78677},{"x1":792.39777,"y1":170.47476,"x2":854.29926,"y2":222.1511},{"x1":268.08563,"y1":168.2346,"x2":271.5719,"y2":263.62927},{"x1":746.24243,"y1":192.78677,"x2":680.3138,"y2":176.2972},{"x1":680.3138,"y1":176.2972,"x2":639.9757,"y2":208.22028},{"x1":746.24243,"y1":192.78677,"x2":750.6104,"y2":315.06494},{"x1":475.32425,"y1":109.86869,"x2":382.3374,"y2":179.3567},{"x1":382.3374,"y1":179.3567,"x2":342.95132,"y2":312.91376},{"x1":475.32425,"y1":109.86869,"x2":508.2232,"y2":167.21326},{"x1":193.97429,"y1":280.01733,"x2":21.45522,"y2":-66.92563},{"x1":508.2232,"y1":167.21326,"x2":407.8048,"y2":317.03958},{"x1":639.9757,"y1":208.22028,"x2":552.3559,"y2":214.94585},{"x1":639.9757,"y1":208.22028,"x2":687.22064,"y2":280.04913},{"x1":508.2232,"y1":167.21326,"x2":552.3559,"y2":214.94585},{"x1":3753.6936,"y1":-43.785065,"x2":854.29926,"y2":222.1511},{"x1":854.29926,"y1":222.1511,"x2":817.4199,"y2":276.4592},{"x1":271.5719,"y1":263.62927,"x2":193.97429,"y2":280.01733},{"x1":948.547,"y1":373.5032,"x2":817.4199,"y2":276.4592},{"x1":687.22064,"y1":280.04913,"x2":602.6688,"y2":337.26984},{"x1":271.5719,"y1":263.62927,"x2":342.95132,"y2":312.91376},{"x1":552.3559,"y1":214.94585,"x2":551.6754,"y2":270.05975},{"x1":687.22064,"y1":280.04913,"x2":750.6104,"y2":315.06494},{"x1":817.4199,"y1":276.4592,"x2":755.67706,"y2":322.03036},{"x1":551.6754,"y1":270.05975,"x2":454.10315,"y2":320.68027},{"x1":191.70865,"y1":286.00763,"x2":144.91995,"y2":309.34167},{"x1":193.97429,"y1":280.01733,"x2":191.70865,"y2":286.00763},{"x1":144.91995,"y1":309.34167,"x2":124.64681,"y2":364.84512},{"x1":191.70865,"y1":286.00763,"x2":216.74211,"y2":364.87943},{"x1":519.5047,"y1":369.61996,"x2":454.10315,"y2":320.68027},{"x1":551.6754,"y1":270.05975,"x2":568.08093,"y2":320.00836},{"x1":454.10315,"y1":320.68027,"x2":434.19916,"y2":324.60126},{"x1":482.30734,"y1":405.26538,"x2":434.19916,"y2":324.60126},{"x1":434.19916,"y1":324.60126,"x2":407.8048,"y2":317.03958},{"x1":407.8048,"y1":317.03958,"x2":348.14832,"y2":326.5878},{"x1":755.9319,"y1":339.65103,"x2":632.6402,"y2":369.7949},{"x1":602.6688,"y1":337.26984,"x2":568.08093,"y2":320.00836},{"x1":568.08093,"y1":320.00836,"x2":564.1167,"y2":325.81567},{"x1":564.1167,"y1":325.81567,"x2":519.5047,"y2":369.61996},{"x1":564.1167,"y1":325.81567,"x2":571.63544,"y2":444.2903},{"x1":602.6688,"y1":337.26984,"x2":632.6402,"y2":369.7949},{"x1":215.5955,"y1":365.25,"x2":147.2089,"y2":375.6864},{"x1":750.6104,"y1":315.06494,"x2":755.67706,"y2":322.03036},{"x1":342.95132,"y1":312.91376,"x2":348.14832,"y2":326.5878},{"x1":147.2089,"y1":375.6864,"x2":124.64681,"y2":364.84512},{"x1":124.64681,"y1":364.84512,"x2":-185.2238,"y2":454.1593},{"x1":147.2089,"y1":375.6864,"x2":152.85042,"y2":403.39035},{"x1":215.5955,"y1":365.25,"x2":173.55891,"y2":415.18933},{"x1":755.67706,"y1":322.03036,"x2":755.9319,"y2":339.65103},{"x1":519.5047,"y1":369.61996,"x2":503.7035,"y2":395.07272},{"x1":215.5955,"y1":365.25,"x2":216.74211,"y2":364.87943},{"x1":216.74211,"y1":364.87943,"x2":254.6819,"y2":388.5553},{"x1":173.55891,"y1":415.18933,"x2":152.85042,"y2":403.39035},{"x1":453.93304,"y1":416.10556,"x2":340.49084,"y2":351.71887},{"x1":152.85042,"y1":403.39035,"x2":138.66891,"y2":435.4751},{"x1":632.6402,"y1":369.7949,"x2":632.9837,"y2":420.86203},{"x1":348.14832,"y1":326.5878,"x2":340.49084,"y2":351.71887},{"x1":173.55891,"y1":415.18933,"x2":187.397,"y2":452.22067},{"x1":755.9319,"y1":339.65103,"x2":770.44794,"y2":370.7136},{"x1":907.1538,"y1":386.3363,"x2":770.44794,"y2":370.7136},{"x1":569.6547,"y1":445.8581,"x2":503.7035,"y2":395.07272},{"x1":503.7035,"y1":395.07272,"x2":482.30734,"y2":405.26538},{"x1":340.49084,"y1":351.71887,"x2":320.8396,"y2":382.21863},{"x1":482.30734,"y1":405.26538,"x2":479.02466,"y2":409.3201},{"x1":479.02466,"y1":409.3201,"x2":453.93304,"y2":416.10556},{"x1":187.397,"y1":452.22067,"x2":138.66891,"y2":435.4751},{"x1":453.93304,"y1":416.10556,"x2":414.9355,"y2":468.85648},{"x1":320.8396,"y1":382.21863,"x2":254.6819,"y2":388.5553},{"x1":875.2802,"y1":438.24878,"x2":816.76556,"y2":454.17374},{"x1":254.6819,"y1":388.5553,"x2":204.57845,"y2":466.22617},{"x1":138.66891,"y1":435.4751,"x2":7.751958,"y2":476.4953},{"x1":770.44794,"y1":370.7136,"x2":758.45764,"y2":415.55206},{"x1":479.02466,"y1":409.3201,"x2":507.5675,"y2":513.2968},{"x1":632.9837,"y1":420.86203,"x2":571.63544,"y2":444.2903},{"x1":907.1538,"y1":386.3363,"x2":875.2802,"y2":438.24878},{"x1":907.1538,"y1":386.3363,"x2":948.547,"y2":373.5032},{"x1":632.9837,"y1":420.86203,"x2":684.61066,"y2":470.17645},{"x1":816.76556,"y1":454.17374,"x2":758.45764,"y2":415.55206},{"x1":816.76556,"y1":454.17374,"x2":847.4913,"y2":515.58167},{"x1":875.2802,"y1":438.24878,"x2":853.7142,"y2":518.5521},{"x1":320.8396,"y1":382.21863,"x2":324.58337,"y2":397.33643},{"x1":324.58337,"y1":397.33643,"x2":268.00116,"y2":509.87134},{"x1":414.9355,"y1":468.85648,"x2":343.07556,"y2":425.94357},{"x1":324.58337,"y1":397.33643,"x2":343.07556,"y2":425.94357},{"x1":948.547,"y1":373.5032,"x2":3753.6936,"y2":-43.785065},{"x1":187.397,"y1":452.22067,"x2":204.57845,"y2":466.22617},{"x1":571.63544,"y1":444.2903,"x2":569.6547,"y2":445.8581},{"x1":343.07556,"y1":425.94357,"x2":341.7393,"y2":552.48755},{"x1":758.45764,"y1":415.55206,"x2":739.6655,"y2":445.2377},{"x1":569.6547,"y1":445.8581,"x2":543.74603,"y2":528.0273},{"x1":414.9355,"y1":468.85648,"x2":430.3513,"y2":518.5239},{"x1":796.52594,"y1":509.4571,"x2":739.6655,"y2":445.2377},{"x1":739.6655,"y1":445.2377,"x2":706.6067,"y2":467.2357},{"x1":204.57845,"y1":466.22617,"x2":204.57507,"y2":493.79703},{"x1":200.20265,"y1":495.47556,"x2":72.79667,"y2":496.78198},{"x1":706.6067,"y1":467.2357,"x2":684.61066,"y2":470.17645},{"x1":706.6067,"y1":467.2357,"x2":749.8098,"y2":572.3244},{"x1":684.61066,"y1":470.17645,"x2":640.21454,"y2":527.60583},{"x1":847.4913,"y1":515.58167,"x2":796.52594,"y2":509.4571},{"x1":796.52594,"y1":509.4571,"x2":749.8098,"y2":572.3244},{"x1":200.20265,"y1":495.47556,"x2":151.0817,"y2":568.74347},{"x1":200.20265,"y1":495.47556,"x2":204.57507,"y2":493.79703},{"x1":204.57507,"y1":493.79703,"x2":229.82611,"y2":513.4017},{"x1":341.7393,"y1":552.48755,"x2":268.00116,"y2":509.87134},{"x1":268.00116,"y1":509.87134,"x2":229.82611,"y2":513.4017},{"x1":151.0817,"y1":568.74347,"x2":72.79667,"y2":496.78198},{"x1":847.4913,"y1":515.58167,"x2":853.7142,"y2":518.5521},{"x1":507.5675,"y1":513.2968,"x2":430.3513,"y2":518.5239},{"x1":229.82611,"y1":513.4017,"x2":226.0838,"y2":592.4614},{"x1":853.7142,"y1":518.5521,"x2":866.41833,"y2":536.0192},{"x1":72.79667,"y1":496.78198,"x2":7.751958,"y2":476.4953},{"x1":430.3513,"y1":518.5239,"x2":403.98083,"y2":547.7885},{"x1":507.5675,"y1":513.2968,"x2":543.74603,"y2":528.0273},{"x1":863.7229,"y1":541.41516,"x2":749.26306,"y2":590.0845},{"x1":640.21454,"y1":527.60583,"x2":577.3574,"y2":537.9671},{"x1":640.21454,"y1":527.60583,"x2":694.55994,"y2":606.85596},{"x1":866.41833,"y1":536.0192,"x2":863.7229,"y2":541.41516},{"x1":151.0817,"y1":568.74347,"x2":158.6659,"y2":607.65356},{"x1":863.7229,"y1":541.41516,"x2":860.71277,"y2":569.16656},{"x1":631.2836,"y1":614.74725,"x2":577.3574,"y2":537.9671},{"x1":577.3574,"y1":537.9671,"x2":550.7883,"y2":537.34845},{"x1":907.206,"y1":652.7483,"x2":860.71277,"y2":569.16656},{"x1":860.71277,"y1":569.16656,"x2":825.8441,"y2":620.50366},{"x1":543.74603,"y1":528.0273,"x2":550.101,"y2":537.0089},{"x1":465.5342,"y1":630.7445,"x2":403.98083,"y2":547.7885},{"x1":403.98083,"y1":547.7885,"x2":349.56543,"y2":563.4218},{"x1":7.751958,"y1":476.4953,"x2":-185.2238,"y2":454.1593},{"x1":341.7393,"y1":552.48755,"x2":349.56543,"y2":563.4218},{"x1":529.4431,"y1":563.4835,"x2":465.5342,"y2":630.7445},{"x1":550.101,"y1":537.0089,"x2":529.4431,"y2":563.4835},{"x1":529.4431,"y1":563.4835,"x2":528.82227,"y2":717.7535},{"x1":550.101,"y1":537.0089,"x2":550.7883,"y2":537.34845},{"x1":550.7883,"y1":537.34845,"x2":581.49255,"y2":652.34015},{"x1":749.8098,"y1":572.3244,"x2":749.26306,"y2":590.0845},{"x1":694.55994,"y1":606.85596,"x2":631.2836,"y2":614.74725},{"x1":631.2836,"y1":614.74725,"x2":589.4411,"y2":651.4693},{"x1":349.56543,"y1":563.4218,"x2":325.0734,"y2":624.59576},{"x1":226.0838,"y1":592.4614,"x2":171.43819,"y2":609.6115},{"x1":226.0838,"y1":592.4614,"x2":276.33752,"y2":625.6653},{"x1":825.8441,"y1":620.50366,"x2":733.32214,"y2":631.7276},{"x1":825.8441,"y1":620.50366,"x2":866.8071,"y2":656.5567},{"x1":749.26306,"y1":590.0845,"x2":733.32214,"y2":631.7276},{"x1":171.43819,"y1":609.6115,"x2":158.6659,"y2":607.65356},{"x1":171.43819,"y1":609.6115,"x2":210.06377,"y2":697.7318},{"x1":158.6659,"y1":607.65356,"x2":147.42479,"y2":614.1601},{"x1":179.81216,"y1":706.58813,"x2":147.42479,"y2":614.1601},{"x1":147.42479,"y1":614.1601,"x2":94.54228,"y2":640.2017},{"x1":694.55994,"y1":606.85596,"x2":732.772,"y2":632.31934},{"x1":465.5342,"y1":630.7445,"x2":460.57578,"y2":692.09735},{"x1":276.33752,"y1":625.6653,"x2":218.7397,"y2":699.44916},{"x1":276.33752,"y1":625.6653,"x2":325.0734,"y2":624.59576},{"x1":661.42017,"y1":677.7475,"x2":589.4411,"y2":651.4693},{"x1":907.206,"y1":652.7483,"x2":866.8071,"y2":656.5567},{"x1":866.8071,"y1":656.5567,"x2":840.32117,"y2":684.7209},{"x1":840.32117,"y1":684.7209,"x2":745.4826,"y2":653.7545},{"x1":589.4411,"y1":651.4693,"x2":581.49255,"y2":652.34015},{"x1":581.49255,"y1":652.34015,"x2":528.82227,"y2":717.7535},{"x1":325.0734,"y1":624.59576,"x2":345.62662,"y2":662.1038},{"x1":907.206,"y1":652.7483,"x2":925.49677,"y2":658.16315},{"x1":156.28854,"y1":715.72034,"x2":94.54228,"y2":640.2017},{"x1":94.54228,"y1":640.2017,"x2":-2514.6875,"y2":515.37256},{"x1":840.32117,"y1":684.7209,"x2":840.8932,"y2":711.9005},{"x1":925.49677,"y1":658.16315,"x2":877.5743,"y2":713.5944},{"x1":661.42017,"y1":677.7475,"x2":594.6218,"y2":745.605},{"x1":661.42017,"y1":677.7475,"x2":695.10583,"y2":673.2435},{"x1":733.32214,"y1":631.7276,"x2":732.772,"y2":632.31934},{"x1":732.772,"y1":632.31934,"x2":732.3472,"y2":636.8225},{"x1":877.5743,"y1":713.5944,"x2":840.8932,"y2":711.9005},{"x1":296.21063,"y1":704.78143,"x2":236.94998,"y2":725.06903},{"x1":296.21063,"y1":704.78143,"x2":280.7126,"y2":751.1383},{"x1":877.5743,"y1":713.5944,"x2":884.8634,"y2":734.5284},{"x1":296.21063,"y1":704.78143,"x2":333.2543,"y2":689.1621},{"x1":732.3472,"y1":636.8225,"x2":695.10583,"y2":673.2435},{"x1":732.3472,"y1":636.8225,"x2":745.4826,"y2":653.7545},{"x1":745.4826,"y1":653.7545,"x2":767.80725,"y2":709.76074},{"x1":883.97345,"y1":734.9733,"x2":832.7115,"y2":727.19354},{"x1":415.6551,"y1":684.35565,"x2":345.62662,"y2":662.1038},{"x1":345.62662,"y1":662.1038,"x2":333.2543,"y2":689.1621},{"x1":695.10583,"y1":673.2435,"x2":683.6468,"y2":761.9674},{"x1":840.8932,"y1":711.9005,"x2":832.7115,"y2":727.19354},{"x1":415.6551,"y1":684.35565,"x2":365.0787,"y2":763.58356},{"x1":210.06377,"y1":697.7318,"x2":179.81216,"y2":706.58813},{"x1":179.81216,"y1":706.58813,"x2":156.28854,"y2":715.72034},{"x1":333.2543,"y1":689.1621,"x2":328.03162,"y2":769.6992},{"x1":210.06377,"y1":697.7318,"x2":218.7397,"y2":699.44916},{"x1":767.80725,"y1":709.76074,"x2":697.72864,"y2":785.68353},{"x1":883.97345,"y1":734.9733,"x2":815.74066,"y2":790.3205},{"x1":883.97345,"y1":734.9733,"x2":884.8634,"y2":734.5284},{"x1":884.8634,"y1":734.5284,"x2":1287.831,"y2":926.5206},{"x1":415.6551,"y1":684.35565,"x2":460.57578,"y2":692.09735},{"x1":218.7397,"y1":699.44916,"x2":236.94998,"y2":725.06903},{"x1":767.80725,"y1":709.76074,"x2":809.86957,"y2":760.7697},{"x1":832.7115,"y1":727.19354,"x2":809.86957,"y2":760.7697},{"x1":156.28854,"y1":715.72034,"x2":95.33395,"y2":861.501},{"x1":280.7126,"y1":751.1383,"x2":237.57733,"y2":728.34717},{"x1":280.7126,"y1":751.1383,"x2":322.73676,"y2":778.21484},{"x1":236.94998,"y1":725.06903,"x2":237.57733,"y2":728.34717},{"x1":-185.2238,"y1":454.1593,"x2":-2514.6875,"y2":515.37256},{"x1":237.57733,"y1":728.34717,"x2":212.88503,"y2":819.5739},{"x1":460.57578,"y1":692.09735,"x2":473.2347,"y2":706.32745},{"x1":683.6468,"y1":761.9674,"x2":594.6218,"y2":745.605},{"x1":416.25882,"y1":772.79956,"x2":365.0787,"y2":763.58356},{"x1":365.0787,"y1":763.58356,"x2":328.03162,"y2":769.6992},{"x1":526.1522,"y1":720.7658,"x2":473.2347,"y2":706.32745},{"x1":473.2347,"y1":706.32745,"x2":458.99683,"y2":729.1746},{"x1":458.99683,"y1":729.1746,"x2":416.25882,"y2":772.79956},{"x1":458.99683,"y1":729.1746,"x2":459.18524,"y2":812.9055},{"x1":594.6218,"y1":745.605,"x2":585.7101,"y2":747.3386},{"x1":585.7101,"y1":747.3386,"x2":526.8127,"y2":720.6147},{"x1":528.82227,"y1":717.7535,"x2":526.8127,"y2":720.6147},{"x1":585.7101,"y1":747.3386,"x2":597.2151,"y2":786.25977},{"x1":416.25882,"y1":772.79956,"x2":407.3946,"y2":812.5488},{"x1":683.6468,"y1":761.9674,"x2":697.72864,"y2":785.68353},{"x1":526.8127,"y1":720.6147,"x2":526.1522,"y2":720.7658},{"x1":526.1522,"y1":720.7658,"x2":518.0333,"y2":832.00995},{"x1":809.86957,"y1":760.7697,"x2":813.24316,"y2":787.64886},{"x1":597.2151,"y1":786.25977,"x2":551.23474,"y2":846.84814},{"x1":459.18524,"y1":812.9055,"x2":407.3946,"y2":812.5488},{"x1":328.03162,"y1":769.6992,"x2":322.73676,"y2":778.21484},{"x1":597.2151,"y1":786.25977,"x2":658.67615,"y2":872.6366},{"x1":459.18524,"y1":812.9055,"x2":487.59845,"y2":852.9606},{"x1":322.73676,"y1":778.21484,"x2":316.48978,"y2":813.76715},{"x1":813.24316,"y1":787.64886,"x2":702.27356,"y2":799.9264},{"x1":697.72864,"y1":785.68353,"x2":702.27356,"y2":799.9264},{"x1":407.3946,"y1":812.5488,"x2":387.88928,"y2":846.03156},{"x1":813.24316,"y1":787.64886,"x2":815.74066,"y2":790.3205},{"x1":815.74066,"y1":790.3205,"x2":824.89703,"y2":803.2093},{"x1":702.27356,"y1":799.9264,"x2":684.61566,"y2":842.46686},{"x1":800.20844,"y1":861.2799,"x2":721.9192,"y2":852.0057},{"x1":1287.831,"y1":926.5206,"x2":824.89703,"y2":803.2093},{"x1":824.89703,"y1":803.2093,"x2":800.20844,"y2":861.2799},{"x1":387.88928,"y1":846.03156,"x2":316.48978,"y2":813.76715},{"x1":799.8498,"y1":924.0926,"x2":721.9192,"y2":852.0057},{"x1":316.48978,"y1":813.76715,"x2":286.1683,"y2":833.45496},{"x1":551.23474,"y1":846.84814,"x2":518.0333,"y2":832.00995},{"x1":518.0333,"y1":832.00995,"x2":487.59845,"y2":852.9606},{"x1":286.1683,"y1":833.45496,"x2":212.88503,"y2":819.5739},{"x1":551.23474,"y1":846.84814,"x2":639.2864,"y2":925.89557},{"x1":721.9192,"y1":852.0057,"x2":684.61566,"y2":842.46686},{"x1":212.88503,"y1":819.5739,"x2":95.33395,"y2":861.501},{"x1":286.1683,"y1":833.45496,"x2":407.30472,"y2":2123.5256},{"x1":387.88928,"y1":846.03156,"x2":433.70428,"y2":933.8504},{"x1":487.59845,"y1":852.9606,"x2":433.70428,"y2":933.8504},{"x1":800.20844,"y1":861.2799,"x2":799.8498,"y2":924.0926},{"x1":684.61566,"y1":842.46686,"x2":658.67615,"y2":872.6366},{"x1":658.67615,"y1":872.6366,"x2":639.2864,"y2":925.89557},{"x1":639.2864,"y1":925.89557,"x2":728.0452,"y2":21987.004},{"x1":433.70428,"y1":933.8504,"x2":407.30472,"y2":2123.5256},{"x1":407.30472,"y1":2123.5256,"x2":728.0452,"y2":21987.004}],"rays":[{"x":476.8784,"y":45.63256,"dx":-14.08844,"dy":-315.39307},{"x":898.8673,"y":-687.90466,"dx":40.441177,"dy":-217.04736},{"x":21.45522,"y":-66.92563,"dx":-148.32692,"dy":-192.69133},{"x":144.91995,"y":309.34167,"dx":-49.509033,"dy":-21.877579},{"x":866.41833,"y":536.0192,"dx":119.467804,"dy":-4.8410645},{"x":925.49677,"y":658.16315,"dx":124.958435,"dy":5.2438965},{"x":799.8498,"y":924.0926,"dx":7.048706,"dy":99.543396},{"x":95.33395,"y":861.501,"dx":-175.89386,"dy":135.70436},{"x":1287.831,"y":926.5206,"dx":155.59784,"dy":48.19519},{"x":3753.6936,"y":-43.785065,"dx":323.97208,"dy":-40.1568},{"x":-2514.6875,"y":515.37256,"dx":-389.22772,"dy":-0.26445007},{"x":728.0452,"y":21987.004,"dx":5.5599365,"dy":503.5848}],"dots":[{"x":866.7567,"y":736.1322},{"x":746.8551,"y":882.10205},{"x":762.16595,"y":516.60944},{"x":132.92659,"y":409.61026},{"x":437.46838,"y":375.41336},{"x":753.8641,"y":874.5249},{"x":784.44507,"y":235.38084},{"x":564.91565,"y":807.9144},{"x":289.3894,"y":731.1156},{"x":758.2414,"y":837.5734},{"x":711.17633,"y":237.99817},{"x":523.1482,"y":625.4324},{"x":114.338486,"y":570.2055},{"x":148.71274,"y":459.99216},{"x":322.3993,"y":124.70445},{"x":648.0606,"y":721.7813},{"x":443.17245,"y":801.4348},{"x":266.06604,"y":767.3147},{"x":520.8376,"y":442.90982},{"x":193.32327,"y":747.6254},{"x":460.22116,"y":459.54977},{"x":799.59076,"y":544.4195},{"x":617.602,"y":691.7981},{"x":443.016,"y":824.15454},{"x":748.65814,"y":750.9551},{"x":129.70796,"y":273.03137},{"x":636.097,"y":786.8734},{"x":867.8758,"y":728.75854},{"x":312.98404,"y":221.42279},{"x":867.76355,"y":291.96045},{"x":467.89667,"y":572.93445},{"x":187.21097,"y":412.76392},{"x":627.3527,"y":132.08281},{"x":531.3524,"y":883.01025},{"x":869.3148,"y":697.60095},{"x":387.07684,"y":746.4796},{"x":637.79236,"y":110.61601},{"x":477.3523,"y":351.62656},{"x":338.40744,"y":878.7287},{"x":107.83038,"y":322.5404},{"x":227.18948,"y":224.55821},{"x":611.334,"y":471.4442},{"x":894.9965,"y":475.02927},{"x":185.6843,"y":556.2991},{"x":833.5591,"y":437.3075},{"x":554.3306,"y":399.41483},{"x":475.14624,"y":801.36285},{"x":379.72873,"y":787.2867},{"x":372.3388,"y":486.82678},{"x":817.0668,"y":585.51917},{"x":260.44565,"y":460.00574},{"x":854.8397,"y":151.05719},{"x":463.87827,"y":283.2284},{"x":535.239,"y":625.481},{"x":409.5211,"y":616.2492},{"x":490.35107,"y":334.25537},{"x":213.5924,"y":645.2232},{"x":164.77094,"y":343.33847},{"x":861.60046,"y":615.7668},{"x":417.76746,"y":252.32346},{"x":846.3985,"y":875.05334},{"x":149.45117,"y":532.0073},{"x":243.2703,"y":887.662},{"x":371.33334,"y":736.4295},{"x":630.8873,"y":590.06555},{"x":879.2878,"y":751.5807},{"x":161.6619,"y":422.31125},{"x":162.09476,"y":667.1837},{"x":269.7185,"y":560.27686},{"x":107.56593,"y":711.7681},{"x":839.7902,"y":460.20328},{"x":246.778,"y":317.30988},{"x":846.9564,"y":320.07526},{"x":285.82245,"y":729.9231},{"x":736.5919,"y":136.39026},{"x":825.6863,"y":656.5721},{"x":169.05933,"y":664.7433},{"x":639.1206,"y":285.39227},{"x":410.55457,"y":422.8324},{"x":807.78687,"y":476.21628},{"x":811.895,"y":698.8096},{"x":894.5937,"y":719.4555},{"x":636.9614,"y":638.7704},{"x":272.5935,"y":691.2812},{"x":583.1284,"y":397.58722},{"x":173.61996,"y":401.32364},{"x":608.2008,"y":605.9993},{"x":312.53323,"y":486.19522},{"x":728.2753,"y":732.1413},{"x":585.0509,"y":823.195},{"x":701.83954,"y":541.4103},{"x":899.8376,"y":594.4971},{"x":664.37933,"y":322.7157},{"x":682.52136,"y":396.9186}],"polygons":[],"arcs":[],"circles":[],"lines":[]};
var camera = [[1,0,0],[0,1,0],[0,0,1]];
var reverseCamera;

var matrixMult = function(x,y,m){
	return {
		"x":m[0][0]*x+m[1][0]*y+m[2][0],
		"y":m[0][1]*x+m[1][1]*y+m[2][1]
	};
};
var coordToCamera = function(x,y){
	return matrixMult(x,y,camera);
};
var scaleCoord = function(x,y){
	var c = camera;
	return {
		"x":c[0][0]*x+c[1][0]*y,
		"y":c[0][1]*x+c[1][1]*y
	};
}
var polygonColors = ["#CD5C5C", "#ADFF2F", "#7B68EE", "#FFA500",
"#F08080", "#00FF00", "#4682B4", "#A52A2A",
"#E9967A", "#32CD32", "#87CEFA", "#D2691E",
"#DC143C", "#00FA9A", "#4169E1",
"#B22222", "#9ACD32", "#FFD700",
"#FF69B4", "#808000", "#FFDAB9",
"#C71585", "#66CDAA", "#F0E68C",
"#DB7093", "#008B8B", "#9370DB"]; 
var getRayMult = function(){
	return 1000/(Math.abs(camera[0][0])+Math.abs(camera[0][1])+Math.abs(camera[1][0])+Math.abs(camera[1][1]));
};

var getMinor = function(m, x, y){
	var x1 = (x+1)%3;
	var x2 = (x+2)%3;
	var y1 = (y+1)%3;
	var y2 = (y+2)%3;
	return m[x1][y1]*m[x2][y2] - m[x1][y2]*m[x2][y1];
};
var getMinorMatrix = function(m){
	var result = [];
	for(var i = 0; i < 3; i++){
		result[i] = [];
		for(var j = 0; j < 3; j++){
			result[i][j] = getMinor(m, i, j);
		}
	}
	return result;
};
var backMatrix = function(m){	
	var mmin = getMinorMatrix(m);	
	var det = m[0][0] * mmin[0][0] - m[0][1] * mmin[0][1] + m[0][2] * mmin[0][2];	
	var result = [];
	for(var i = 0; i < 3; i++){
		result[i] = [];
		for(var j = 0; j < 3; j++){
			result[i][j] = mmin[j][i] / det * ((i+j)%2==0?1:-1);
		}
	}
	return result;		
};
window.onload = function() {
	var drawingCanvas = document.getElementById('smile');
	var coord;
	if(drawingCanvas && drawingCanvas.getContext) {
		var context = drawingCanvas.getContext('2d');
		if(outputRepr.camera!==undefined){
			for(var i = 0; i < 3; i++){
				for(var j = 0; j < 3; j++){
					if(outputRepr.camera[i][j] !== undefined){
						camera[i][j] = outputRepr.camera[i][j];
					}
				}
			}
		}
		reverseCamera = backMatrix(camera);
		if(outputRepr.size!==undefined){
			drawingCanvas.width = outputRepr.size.x;
			drawingCanvas.height = outputRepr.size.y;
		}
		var rayMult = getRayMult();		
		var minCorner = matrixMult(0, 0, reverseCamera);
		var maxCorner = matrixMult(drawingCanvas.width, drawingCanvas.height, reverseCamera);
		var xMin = Math.min(minCorner.x, maxCorner.x);
		var xMax = Math.max(minCorner.x, maxCorner.x);
		var xStep = (xMax - xMin) / drawingCanvas.width;
		var yMin = Math.min(minCorner.y, maxCorner.y);
		var yMax = Math.max(minCorner.y, maxCorner.y);
		
		context.shadowColor = "rgba(0,0,0,.5)";
		context.shadowBlur = 2;
		context.lineCap = 'round';
		context.lineJoin = 'round';
		context.lineWidth = 1;
		
		if(outputRepr.polygons!==undefined){
			for(var polyId = 0; polyId < outputRepr.polygons.length; polyId++){
				var poly = outputRepr.polygons[polyId];
				context.fillStyle = polygonColors[polyId % polygonColors.length];				
				
				context.beginPath();
				coord = coordToCamera(poly.dots[0].x, poly.dots[0].y);
				context.moveTo(coord.x, coord.y);
				for(var dotId = 1; dotId < poly.dots.length; dotId++){
					coord = coordToCamera(poly.dots[dotId].x, poly.dots[dotId].y);
					context.lineTo(coord.x, coord.y);
				}
				context.closePath();
				context.fill();
			}
		}
		if(outputRepr.edges!==undefined){
			context.strokeStyle = "#AA0";
			
			outputRepr.edges.forEach((elem)=>{				
				context.beginPath();
				coord = coordToCamera(elem.x1, elem.y1);
				context.moveTo(coord.x, coord.y);
				coord = coordToCamera(elem.x2, elem.y2);
				context.lineTo(coord.x, coord.y);				
				context.stroke();
			});
		}
		if(outputRepr.rays!==undefined){
			context.strokeStyle = "#0AA";
			
			outputRepr.rays.forEach((elem)=>{				
				context.beginPath();
				coord = coordToCamera(elem.x, elem.y);
				context.moveTo(coord.x, coord.y);
				var rayCoord = coordToCamera(elem.x+elem.dx*rayMult, elem.y+elem.dy*rayMult);
				context.lineTo(rayCoord.x, rayCoord.y);
				context.lineCap = 'round';
				context.stroke();
			});
		}	
		if(outputRepr.lines!==undefined){
			context.strokeStyle = "#AAA";
			
			outputRepr.lines.forEach((elem)=>{
				var x, y;
				var coord1, coord2;
				if(Math.abs(elem.dx) > Math.abs(elem.dy)){
					coord1 = coordToCamera((-elem.dy * yMin - elem.c) / elem.dx, yMin);
					coord2 = coordToCamera((-elem.dy * yMax - elem.c) / elem.dx, yMax);
				}else{
					coord1 = coordToCamera(xMin, (-elem.dx * xMin - elem.c) / elem.dy);
					coord2 = coordToCamera(xMax, (-elem.dx * xMax - elem.c) / elem.dy);
				}
				context.beginPath();
				context.moveTo(coord1.x, coord1.y);
				context.lineTo(coord2.x, coord2.y);
				context.stroke();
			});
		}
		if(outputRepr.circles!==undefined){
			context.setLineDash([5,5]);
			context.strokeStyle = "#A00";
			
			outputRepr.circles.forEach((elem)=>{
				var coord = coordToCamera(elem.x, elem.y);
				var size = scaleCoord(1, 1);
				context.beginPath();
				context.ellipse(coord.x, coord.y, elem.r*Math.abs(size.x), elem.r*Math.abs(size.y), 0, 0, Math.PI*2);
				context.stroke();
			});
			context.setLineDash([]);
		}
		if(outputRepr.arcs!==undefined){
			context.strokeStyle = "#00A";

			outputRepr.arcs.forEach((elem)=>{
				context.beginPath();
				drawMinX = Math.max(elem.minX, xMin);
				drawMaxX = Math.min(elem.maxX, xMax);
				var count = 0;
				for(var x = drawMinX; x < drawMaxX+xStep; x += xStep){
					var y = .5 * ((x - elem.fX) * (x - elem.fX) 
						+ elem.fY * elem.fY - elem.dirY * elem.dirY)
						/ (elem.fY - elem.dirY);
					var coord = coordToCamera(x,y);
					if(count==0){
						context.moveTo(coord.x, coord.y);
					}else{
						context.lineTo(coord.x, coord.y);
					}
					count++;
				}
				//context.closePath();
				context.stroke();
			});
		}
		if(outputRepr.dots!==undefined){
			context.fillStyle = "#FFF";
			context.strokeStyle = "#000";
			
			outputRepr.dots.forEach((elem)=>{				
				coord = coordToCamera(elem.x, elem.y);
				context.beginPath();
				context.arc(coord.x, coord.y, 3, 0, Math.PI*2);
				context.fill();
				context.stroke();				
			});
		}
	}
}
  </script>
 </head>
 <body>
  <canvas id="smile" width="200" height="200">
    <p>Ваш браузер не поддерживает рисование.</p>
  </canvas>
 </body>
</html>